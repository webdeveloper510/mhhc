(()=>{"use strict";var e=function(){return e=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++)for(var a in i=arguments[t])Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);return e},e.apply(this,arguments)},i=window.jQuery;i((function(){var e=window.fieldSettings;for(var t in e)e.hasOwnProperty(t)&&-1!==i.inArray(t,["select","multiselect","address"])&&(e[t]+=", .gpadvs-field-setting");s(),function(){for(var e=0,i=window.form.fields;e<i.length;e++){var t=i[e];t.gpadvsEnable&&("multiselect"===t.type?p(t):"select"===t.type&&f(t))}}()}));var t=window.SetFieldProperty;window.SetFieldProperty=function(e,i){window.gform.doAction("gpadvs_gform_set_field_property",e,i),t(e,i)};var n=window.UpdateFieldChoices;window.UpdateFieldChoices=function(e){var i=window.field,t=i.gpadvsEnable,a=i.type;t&&["multiselect","select"].includes(a)&&g(window.field),n(e)},document.addEventListener("gform/flyout/pre_init",(function(e){if("choices-ui-flyout"===e.detail.instance.options.id){var i=e.detail.instance.options.onClose;e.detail.instance.options.onClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=window.field,a=n.gpadvsEnable,o=n.type;a&&["multiselect","select"].includes(o)&&g(window.field),i.apply(void 0,e)}}})),window.gform.addAction("gpadvs_gform_set_field_property",(function(i,t){var n=window.field;"placeholder"===i&&n.gpadvsEnable&&g(e(e({},n),{placeholder:t}))})),window.gform.addAction("gpadvs_gform_set_field_property",(function(e,i){if("gpadvsEnable"===e){var t=window.field,n=window.field.type;"multiselect"===n&&(!0===i?c():r()),["multiselect","select"].includes(n)&&(!0===i?g(t):function(e){u(e).show(),v(e).hide()}(t))}})),window.gform.addFilter("gfic_field_can_have_images",(function(e,i){return!!i.gpadvsEnable||e}));var a=function(e){var i,t;jQuery("#gpadvs-enhanced-ui-notice").remove();var n=jQuery("#gfield_enable_enhanced_ui");if(e){var a=jQuery('<div id="gpadvs-enhanced-ui-notice" class="gform-accessibility-warning field_setting gform-alert gform-alert--accessibility gform-alert--inline">\n\t\t\t\t\t<span class="gform-icon gform-icon--password gform-alert__icon"></span>\n\t\t\t\t\t<div class="gform-alert__message-wrap">\n\t\t\t\t\t\t<p class="gform-alert__message" style="margin: 0;padding-top:2px;">'.concat(null===(i=window.GPADVS_FORM_EDITOR.strings)||void 0===i?void 0:i.not_compat_with_enhanced_ui,"</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>"));n.prop("disabled",!0),(null===(t=window.field)||void 0===t?void 0:t.enableEnhancedUI)&&(n.prop("checked",!1).trigger("change"),window.SetFieldEnhancedUI(!1)),a.insertAfter(".enable_enhanced_ui_setting")}else n.prop("disabled",!1)},o=function(){var e=window.field,t=!!(null==e?void 0:e.gpadvsEnable),n=!!(null==e?void 0:e["gppa-choices-enabled"]);window.GPPA&&t&&n?(i("#gpadvs-enable-child-settings").show(),i("#gpadvs-gppa-lazy-load-row").show()):(i("#gpadvs-enable-child-settings").hide(),i("#gpadvs-gppa-lazy-load-row").hide())},d=function(){i("#general_tab > .gform-alert--accessibility").hide(),i("#general_tab > .gform-alert--accessibility + li.field_setting").addClass("gp-advanced-select-no-top-margin")},l=function(){i("#general_tab > .gform-alert--accessibility").show(),i("#general_tab > .gform-alert--accessibility + li.field_setting").removeClass("gp-advanced-select-no-top-margin")},c=function(){i(".placeholder_setting").show()},r=function(){i(".placeholder_setting").hide()},s=function(){i("#gpadvs-enable").on("change",(function(){window.SetFieldProperty("gpadvsEnable",this.checked),a(this.checked),window.imageChoicesAdmin&&window.gform.doAction("gform_load_field_choices",[window.field]),this.checked?d():l(),o()})),i("#gpadvs-gppa-lazy-load").on("change",(function(){window.SetFieldProperty("gpadvsGPPALazyLoad",this.checked)})),i("#gppa").on("change","#gppa-choices-enabled",(function(){o(),window.field.gpadvsEnable&&p(window.field)})),i(document).on("gform_load_field_settings",(function(e,t,n){var r,s=!!t.gpadvsEnable,p="multiselect"===t.type;s&&p&&c(),i("#gpadvs-enable").prop("checked",s),a(s);var f=i("#gpadvs-gppa-lazy-load");f.prop("checked",!!t.gpadvsGPPALazyLoad),o(),f.prop("disabled",!1);e:for(var g=0,u=null!==(r=null==t?void 0:t["gppa-choices-filter-groups"])&&void 0!==r?r:[];g<u.length;g++)for(var v=0,h=u[g];v<h.length;v++)if("special_value:advanced_select_search_value"===h[v].value){f.prop("checked",!0).prop("disabled",!0);break e}var w=i("li.image-choices-setting-show-labels, li.image-choices-setting-use-lightbox"),_="gpadvs-hidden-image-choices-setting";s?(w.addClass(_),d()):(w.removeClass(_),l())}))};function p(e){var t=e.placeholder||"",n=t.length?2:3,a=e.choices.filter((function(e){var i;return null===(i=e.text)||void 0===i?void 0:i.length})).slice(0,n);e["gppa-choices-enabled"]&&(a=[23,31,28].map((function(e,i){return{text:Array(e).fill("&nbsp;").join(""),isSelected:!1,price:"",value:String(i)}})));var o=a.map((function(e){var i=e.text;return'<div data-value="'.concat(i,'" class="item" data-ts-item="">').concat(i,'<a href="javascript:void(0)" class="remove" tabindex="-1" title="Remove this item">Ã—</a></div>')})),d=i("#field_".concat(e.id," > .ginput_container > .ts-wrapper > .ts-control"));d.find(".item").each((function(e,i){i.remove()})),d.prepend(o.join("")),d.find("input").attr("placeholder",t)}function f(e){var t=e.choices.filter((function(e){return e.text&&e.value}))[0],n=e.placeholder,a=i("#field_".concat(e.id," > .ginput_container > .ts-wrapper > .ts-control"));a.find(".item").each((function(e,i){i.remove()})),!n&&t?(a.find("input").removeAttr("placeholder"),a.prepend('<div data-value="'.concat(t.text,'" class="item" data-ts-item="">').concat(t.text,"</div>"))):a.find("input").attr("placeholder",e.placeholder||"")}function g(e){u(e).hide(),v(e).show(),"multiselect"===e.type?p(e):"select"===e.type&&f(e)}function u(e){return i("#field_".concat(e.id," > .ginput_container > select")).not(".tomselected").closest(".ginput_container")}function v(e){return i("#field_".concat(e.id," > .ginput_container > select.tomselected")).closest(".ginput_container")}window.gform.addFilter("gppa_filter_special_values",(function(e,t){var n=t.field.inputType?t.field.inputType:t.field.type;return-1!==i.inArray(n,["select","multiselect","address"])&&t.field.gpadvsEnable?(e.push({label:"Advanced Select Search Value",value:"special_value:advanced_select_search_value"}),e):e})),window.gform.addAction("gppa_filter_value_updated",(function(e,i){"special_value:advanced_select_search_value"===e&&i.updateSelectedOperator("contains")}))})();
//# sourceMappingURL=gp-advanced-select-form-editor.js.map