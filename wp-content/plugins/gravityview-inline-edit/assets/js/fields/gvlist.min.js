!function($){"use strict";var Gvlist=function(options){this.init("gvlist",options,Gvlist.defaults),this.sourceData=null};$.fn.editableutils.inherit(Gvlist,$.fn.editabletypes.list),$.extend(Gvlist.prototype,{render:function(){this.sourceData=this.options.source,$.isArray(this.sourceData)&&(this.$input=this.$tpl.find("input[name^='input_']"))},value2str:function(value){return value},str2value:function(str){return str},value2input:function(value){var inputValue,propertyName,sourceData=this.sourceData,isMultiColumn=this.options.multicolumn,columnCount=this.options.colcount,counter=0,$addButton=null,isLegacy=!1;if($(this.$tpl).find("table.gfield_list_container").length>0&&(isLegacy=!0),value&&(sourceData=value),isMultiColumn&&void 0===columnCount&&(columnCount=this.$tpl.find("input[name^='input_']").length),$.isArray(sourceData)&&sourceData.length){$addButton=this.$tpl.find(".add_list_item"),isLegacy&&$(this.$tpl).find("table.gfield_list_container").parents(".gform_wrapper").addClass("gform_legacy_markup_wrapper");for(var i=1;i<sourceData.length;i++)gformAddListItem($addButton,0);this.$tpl.find("input[name^='input_']").each(function(i,el){isMultiColumn?(propertyName=isLegacy?$(el).parents("td").data("label"):$(el).parents(".gfield_list_group_item").data("label"),counter=Math.floor(i/columnCount),inputValue=sourceData[counter][propertyName]):inputValue=sourceData[i],$(el).val(inputValue)})}},input2value:function(){var listValues=[],propertyName=null,rowNumber=0,listRow={},isMultiColumn=this.options.multicolumn,columnCount=this.options.colcount,isLegacy=!1;return $(this.$tpl).find("table.gfield_list_container").length>0&&(isLegacy=!0),isMultiColumn&&void 0===columnCount&&(columnCount=this.$tpl.find("input[name^='input_']").length),this.$tpl.find("input[name^='input_']").each(function(i,el){isMultiColumn?(propertyName=isLegacy?$(el).parents("td").data("label"):$(el).parents(".gfield_list_group_item").data("label"),rowNumber=Math.floor(i/columnCount),listValues[rowNumber]?listValues[rowNumber][propertyName]=$(el).val():((listRow={})[propertyName]=$(el).val(),listValues.push(listRow))):listValues.push($(el).val())}),listValues},value2html:function(value,element){if(value){var valueHtml=null,valueArray=$.map(value,function(val,index){return"object"==typeof val?[val]:val.length>0?[val]:void 0});if(0!==valueArray.length){var isMultiColumnEmpty=!0;null!==valueArray[0]&&"object"==typeof valueArray[0]?(valueHtml="<table><thead><tr>",$.each(valueArray[0],function(colName,colValue){valueHtml+="<th>"+colName+"</th>"}),valueHtml+="</tr></thead><tbody>",$.each(valueArray,function(i,val){valueHtml+="<tr>",$.each(val,function(key,cellData){cellData&&(isMultiColumnEmpty=!1),valueHtml+="<td>"+cellData+"</td>"}),valueHtml+="</tr>"}),valueHtml+="</tbody></table>"):valueHtml="<ul><li>"+valueArray.join("</li><li>")+"</li></ul>",this.options.multicolumn&&isMultiColumnEmpty?$(element).empty():$(element).html(valueHtml)}else $(element).empty()}else $(element).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&$(this).closest("form").submit()})}}),Gvlist.defaults=$.extend({},$.fn.editabletypes.list.defaults,{inputclass:null,separator:","}),$.fn.editabletypes.gvlist=Gvlist}(window.jQuery);