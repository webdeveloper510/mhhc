window.GV_MAPS_SETTINGS=window.GV_MAPS_SETTINGS||{},function($){function verify_key(force_verification){var updated_api_key=$api_key_input_field.val();$verify_key.insertAfter($api_key_input_field),updated_api_key&&""!==String(updated_api_key)?($key_required.hide(),$required_error.hide(),$verification_response.show(),$verify_key.show(),!0!==force_verification&&current_api_key===updated_api_key||($verification.show(),$verification_error.hide(),$verify_key.prop("disabled","disabled"),$verification_response.hide(),$verification_response.find("span.dashicons").removeClass("dashicons-yes dashicons-no"),$.ajax({type:"POST",url:ajaxurl,data:{nonce:GV_MAPS_SETTINGS.nonce,action:GV_MAPS_SETTINGS.action_verify_api_key,api_key:updated_api_key}}).done(function(response){if(!response.success)return $verification_error.show();$.map(response.data,function(data,capability){capability=$verification_response.find(".gv-maps-api-cap-"+capability);$(".dashicons",capability).addClass("dashicons-"+(data.enabled?"yes":"no")),$(".description",capability).html(data.message)}),$verification_response.show()}).fail(function(){$verification_error.show()}).always(function(){$verification.hide(),$verify_key.prop("disabled",null)}),current_api_key=updated_api_key)):($key_required.show(),$verify_key.hide(),$verification_response.hide())}var $key_required=$("div.gforms_note_warning"),$verify_key=$("button.gv-map-api-verify"),$api_key_input_field=$("#googlemaps-api-key"),$verification=$("#api_key_verification"),$verification_error=$("#api_key_verification_error"),$required_error=$("#api_key_required_error"),$verification_response=$("#api_key_verification_response"),current_api_key=$api_key_input_field.val();$api_key_input_field.on("blur",verify_key),$verify_key.on("click",function(){verify_key(!0)}),$(document).on("ready",function(){verify_key(!0)})}(jQuery);